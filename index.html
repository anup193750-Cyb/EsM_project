
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>âš¡ RL Circuit Simulator (AC Excitation)</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    body { font-family: "Segoe UI", Arial, sans-serif; margin: 30px; background: #f9fafb; color: #222; }
    h2 { color: #0047ab; }
    .control { margin: 10px 0; }
    .label { display: inline-block; width: 150px; }
    .slider { width: 300px; }
    #plots { display: flex; flex-wrap: wrap; gap: 30px; }
    #plots > div { flex: 1 1 500px; }
    #info { background: #eef2ff; border-left: 5px solid #3b82f6; padding: 10px 20px; border-radius: 8px; width: 80%; margin-top: 15px; }
    footer { margin-top: 30px; font-size: 14px; text-align: center; color: #555; }
  </style>
</head>
<body>

<h2>âš¡ RL Circuit Simulator (AC Excitation)</h2>
<p>Compute and visualize current, voltage, and transient response for an RL circuit driven by <b>VmÂ·cos(Ï‰t)</b>.</p>

<!-- Controls -->
<div class="control"><span class="label">Voltage Amplitude (Vm):</span>
  <input type="range" id="Vm" class="slider" min="1" max="100" value="10" step="1"> <span id="Vm_val">10</span> V
</div>

<div class="control"><span class="label">Frequency (Hz):</span>
  <input type="range" id="f" class="slider" min="10" max="1000" value="50" step="10"> <span id="f_val">50</span>
</div>

<div class="control"><span class="label">Resistance (Î©):</span>
  <input type="range" id="R" class="slider" min="0" max="100" value="10" step="1"> <span id="R_val">10</span>
</div>

<div class="control"><span class="label">Inductance (H):</span>
  <input type="range" id="L" class="slider" min="0.001" max="1" value="0.1" step="0.001"> <span id="L_val">0.1</span>
</div>

<!-- Graphs -->
<div id="plots">
  <div id="plot1"></div>
  <div id="plot2"></div>
</div>

<!-- Info -->
<div id="info"></div>

<footer>
  <b>Group:</b> ___________________________ |
  <b>Roll No:</b> ___________________________
</footer>

<script>
function update() {
  const Vm = parseFloat(Vm_slider.value);
  const f = parseFloat(f_slider.value);
  const R = parseFloat(R_slider.value);
  const L = parseFloat(L_slider.value);

  document.getElementById("Vm_val").innerText = Vm;
  document.getElementById("f_val").innerText = f;
  document.getElementById("R_val").innerText = R;
  document.getElementById("L_val").innerText = L.toFixed(3);

  const w = 2 * Math.PI * f;
  const Z = Math.sqrt(R**2 + (w*L)**2);
  const phi = Math.atan(w*L / (R === 0 ? 1e-9 : R));
  const I_m = Vm / Z;

  const t = Array.from({length: 500}, (_, i) => i * 0.0001);
  const v = t.map(tt => Vm * Math.cos(w*tt));
  const i = t.map(tt => I_m * Math.cos(w*tt - phi));

  // --- Plot 1: Voltage & Current vs Time ---
  const traceV = {x: t, y: v, name: "Voltage (V)", line: {color: "blue"}};
  const traceI = {x: t, y: i, name: "Current (A)", line: {color: "red"}, yaxis: "y2"};
  const layout1 = {
    title: "Voltage and Current vs Time",
    xaxis: {title: "Time (s)"},
    yaxis: {title: "Voltage (V)"},
    yaxis2: {title: "Current (A)", overlaying: "y", side: "right"},
    legend: {x: 0.2, y: 1.1, orientation: "h"}
  };
  Plotly.newPlot("plot1", [traceV, traceI], layout1);

  // --- Plot 2: Transient Response ---
  const tau = L / (R === 0 ? 1e-9 : R);
  const i_tr = t.map(tt => (Vm/R) * (1 - Math.exp(-tt / tau)));
  const traceT = {x: t, y: i_tr, name: "Transient Current", line: {color: "green"}};
  const layout2 = {
    title: "Transient Response (i(t) = (Vm/R)(1 - e^{-tR/L}))",
    xaxis: {title: "Time (s)"},
    yaxis: {title: "Current (A)"},
    legend: {x: 0.1, y: 1.1, orientation: "h"}
  };
  Plotly.newPlot("plot2", [traceT], layout2);

  // --- Info ---
  const pf = Math.cos(phi).toFixed(3);
  document.getElementById("info").innerHTML = `
    <h3>ğŸ“˜ Circuit Info</h3>
    <b>Impedance (Z):</b> ${Z.toFixed(2)} Î©<br>
    <b>Phase Angle (Ï†):</b> ${(phi*180/Math.PI).toFixed(2)}Â°<br>
    <b>Current Amplitude (Iâ‚˜):</b> ${I_m.toFixed(3)} A<br>
    <b>Power Factor:</b> ${pf}<br>
    <b>Time Constant (Ï„ = L/R):</b> ${tau.toFixed(4)} s
    <hr>
    <b>Formulas:</b><br>
    Z = âˆš(RÂ² + (Ï‰L)Â²)<br>
    I = (Vâ‚˜ / Z) cos(Ï‰t - Ï†)<br>
    Ï† = tanâ»Â¹(Ï‰L / R)<br>
    i(t) = (Vâ‚˜ / R)(1 - e<sup>-tR/L</sup>)
  `;
}

// Sliders
const Vm_slider = document.getElementById("Vm");
const f_slider = document.getElementById("f");
const R_slider = document.getElementById("R");
const L_slider = document.getElementById("L");

[Vm_slider, f_slider, R_slider, L_slider].forEach(el => el.oninput = update);
update();
</script>
</body>
</html>
